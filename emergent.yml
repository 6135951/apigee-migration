# =============================================================================
# EMERGENT.YML - Platform Configuration (Optional)
# =============================================================================
# This file is typically used for Emergent platform deployments
# It's NOT mandatory for Docker/local development
# Only needed if deploying to Emergent's managed platform

# Application Configuration
app:
  name: apigee-migration-tool
  version: "1.0.0"
  description: "Automated Apigee Edge to Apigee X Migration Tool"
  
# Runtime Configuration  
runtime:
  frontend:
    type: react
    build_command: "yarn build"
    serve_from: "build/"
    port: 3000
    
  backend:
    type: fastapi
    main: "server:app"
    port: 8001
    requirements: "requirements.txt"

# Database Configuration
database:
  type: mongodb
  version: "7.0"
  name: apigee_migration_db
  
# Environment Variables (References to secrets)
environment:
  # These reference external secret stores
  OPENAI_API_KEY: ${secrets.OPENAI_API_KEY}
  MONGO_ROOT_PASSWORD: ${secrets.MONGO_ROOT_PASSWORD}
  JWT_SECRET: ${secrets.JWT_SECRET}
  
# Resource Limits
resources:
  frontend:
    memory: "512Mi"
    cpu: "0.5"
  backend:
    memory: "1Gi"
    cpu: "1.0"
  database:
    memory: "2Gi"
    cpu: "1.0"
    storage: "10Gi"

# Health Checks
health_checks:
  backend:
    path: "/api/"
    interval: 30
  frontend:
    path: "/"
    interval: 30

# Scaling Configuration
scaling:
  backend:
    min_replicas: 1
    max_replicas: 3
    target_cpu: 70
    
# Security Configuration
security:
  ssl: true
  cors_origins:
    - https://yourdomain.com
    - https://www.yourdomain.com